<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claudecord Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/build/qrcode.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            mono: ['JetBrains Mono', 'Menlo', 'Monaco', 'monospace'],
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

    .scrollbar-thin::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    .scrollbar-thin::-webkit-scrollbar-track {
      background: transparent;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb {
      background: #3f3f46;
      border-radius: 3px;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
      background: #52525b;
    }

    .typing-indicator span {
      animation: bounce 1.4s infinite ease-in-out both;
    }
    .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
    .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }
  </style>
</head>
<body class="h-full bg-zinc-950 text-zinc-100 font-mono">
  <div class="flex h-full">
    <!-- Sidebar -->
    <aside class="w-64 border-r border-zinc-800 flex flex-col">
      <!-- Session controls -->
      <div class="p-4 border-b border-zinc-800">
        <h1 class="text-sm font-semibold text-zinc-400 mb-3">SESSION</h1>
        <button id="newSessionBtn" class="w-full px-3 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-100 text-sm rounded transition-colors">
          New Session
        </button>
        <div id="sessionInfo" class="mt-3 text-xs text-zinc-500 hidden">
          <span class="inline-block w-2 h-2 bg-emerald-500 rounded-full mr-2"></span>
          <span id="sessionID">-</span>
        </div>
      </div>

      <!-- Skills list -->
      <div class="flex-1 overflow-hidden flex flex-col">
        <div class="p-4 pb-2 flex items-center justify-between">
          <h2 class="text-sm font-semibold text-zinc-400">SKILLS</h2>
          <div class="flex gap-2">
            <button id="newSkillBtn" class="text-zinc-500 hover:text-zinc-300 transition-colors" title="New Skill">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
            </button>
            <button id="refreshSkillsBtn" class="text-zinc-500 hover:text-zinc-300 transition-colors" title="Refresh">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="px-4 pb-2">
          <input type="text" id="skillSearch"
            class="w-full bg-zinc-900 border border-zinc-700 rounded px-2 py-1 text-xs focus:outline-none focus:border-zinc-500 placeholder-zinc-600"
            placeholder="Search skills...">
        </div>
        <div id="skillsList" class="flex-1 overflow-y-auto scrollbar-thin px-2 pb-4">
          <!-- Skills populated by JS -->
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main class="flex-1 flex flex-col overflow-hidden">
      <!-- Chat area -->
      <div class="flex-1 flex flex-col overflow-hidden border-b border-zinc-800">
        <div class="px-4 py-3 border-b border-zinc-800">
          <h2 class="text-sm font-semibold text-zinc-400">CHAT</h2>
        </div>
        <div id="whatsappQR" class="hidden mx-4 mt-3 p-4 bg-zinc-900 border border-zinc-700 rounded-lg text-center">
          <h3 class="text-xs font-semibold text-zinc-400 mb-3">WHATSAPP PAIRING</h3>
          <canvas id="qrCanvas" class="mx-auto"></canvas>
          <p id="qrStatus" class="text-sm text-zinc-300 mt-2"></p>
          <p class="text-xs text-zinc-500 mt-1">Scan with WhatsApp â€º Linked Devices</p>
        </div>
        <div id="chatMessages" class="flex-1 overflow-y-auto scrollbar-thin p-4 space-y-4">
          <!-- Messages populated by JS -->
        </div>

        <!-- Typing indicator -->
        <div id="typingIndicator" class="px-4 py-2 hidden">
          <div class="typing-indicator flex items-center gap-1 text-zinc-500">
            <span class="w-2 h-2 bg-zinc-500 rounded-full"></span>
            <span class="w-2 h-2 bg-zinc-500 rounded-full"></span>
            <span class="w-2 h-2 bg-zinc-500 rounded-full"></span>
          </div>
        </div>

        <!-- Input -->
        <div class="p-4 border-t border-zinc-800">
          <div class="flex gap-3">
            <input type="text" id="chatInput"
              class="flex-1 bg-zinc-900 border border-zinc-700 rounded px-3 py-2 text-sm focus:outline-none focus:border-zinc-500 placeholder-zinc-600"
              placeholder="Type a message...">
            <button id="sendBtn"
              class="px-4 py-2 bg-zinc-100 text-zinc-900 text-sm font-medium rounded hover:bg-zinc-200 transition-colors">
              Send
            </button>
          </div>
        </div>
      </div>

      <!-- Logs area -->
      <div class="h-64 flex flex-col">
        <div class="px-4 py-3 border-b border-zinc-800 flex items-center justify-between">
          <h2 class="text-sm font-semibold text-zinc-400">LOGS</h2>
          <button id="clearLogsBtn" class="text-xs text-zinc-500 hover:text-zinc-300 transition-colors">
            Clear
          </button>
        </div>
        <div id="logsContainer" class="flex-1 overflow-y-auto scrollbar-thin p-4 font-mono text-xs">
          <!-- Logs populated by JS -->
        </div>
      </div>
    </main>
  </div>

  <!-- Permission Modal -->
  <div id="permissionModal" class="fixed inset-0 bg-black/60 flex items-center justify-center hidden z-50">
    <div class="bg-zinc-900 border border-zinc-700 rounded-lg max-w-lg w-full mx-4 shadow-2xl">
      <div class="p-4 border-b border-zinc-800">
        <h3 class="text-sm font-semibold">Permission Required</h3>
      </div>
      <div class="p-4">
        <pre id="permissionPrompt" class="whitespace-pre-wrap text-sm text-zinc-300 bg-zinc-950 p-3 rounded border border-zinc-800"></pre>
      </div>
      <div class="p-4 border-t border-zinc-800 flex justify-end gap-3">
        <button id="permDenyBtn" class="px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-sm rounded transition-colors">
          Deny
        </button>
        <button id="permApproveBtn" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-sm font-medium rounded transition-colors">
          Approve
        </button>
      </div>
    </div>
  </div>

  <!-- Skill Editor Modal -->
  <div id="skillModal" class="fixed inset-0 bg-black/60 flex items-center justify-center hidden z-50">
    <div class="bg-zinc-900 border border-zinc-700 rounded-lg w-full max-w-4xl mx-4 h-[80vh] flex flex-col shadow-2xl">
      <div class="p-4 border-b border-zinc-800 flex items-center justify-between">
        <h3 id="skillModalTitle" class="text-sm font-semibold">Edit Skill</h3>
        <button id="closeSkillModalBtn" class="text-zinc-400 hover:text-zinc-100 transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <!-- Tabs -->
      <div class="border-b border-zinc-800 px-4">
        <div class="flex gap-4">
          <button class="skill-tab py-2 text-sm border-b-2 border-transparent text-zinc-400 hover:text-zinc-100 transition-colors" data-tab="content">
            SKILL.md
          </button>
          <button class="skill-tab py-2 text-sm border-b-2 border-transparent text-zinc-400 hover:text-zinc-100 transition-colors" data-tab="files">
            Files
          </button>
        </div>
      </div>

      <!-- Content tab -->
      <div id="skillContentTab" class="flex-1 p-4 overflow-hidden">
        <textarea id="skillContent"
          class="w-full h-full bg-zinc-950 border border-zinc-800 rounded p-3 text-sm font-mono resize-none focus:outline-none focus:border-zinc-600 scrollbar-thin"
          spellcheck="false"></textarea>
      </div>

      <!-- Files tab -->
      <div id="skillFilesTab" class="flex-1 p-4 overflow-y-auto scrollbar-thin hidden">
        <div id="skillFilesList" class="space-y-2">
          <!-- Files populated by JS -->
        </div>
        <div class="mt-4 border-2 border-dashed border-zinc-700 rounded-lg p-6 text-center">
          <input type="file" id="fileUploadInput" class="hidden" multiple>
          <label for="fileUploadInput" class="cursor-pointer">
            <div class="text-zinc-400 text-sm">
              Drop files here or <span class="text-zinc-100 underline">browse</span>
            </div>
            <div class="text-zinc-600 text-xs mt-1">Supports scripts, references, assets</div>
          </label>
        </div>
      </div>

      <!-- Footer -->
      <div class="p-4 border-t border-zinc-800 flex justify-end gap-3">
        <button id="cancelSkillBtn" class="px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-sm rounded transition-colors">
          Cancel
        </button>
        <button id="saveSkillBtn" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-sm font-medium rounded transition-colors">
          Save
        </button>
      </div>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
